# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏ –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö CrazyWalk

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±—ä—è—Å–Ω—è–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –ª–æ–≥–∏–∫—É –ø–∞–π–ø–ª–∞–π–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∫ –ø—Ä–æ—á—Ç–µ–Ω–∏—é –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤ **GeoLogic** –∏ **UX Map**.

---

## üó∫Ô∏è –ò–µ—Ä–∞—Ä—Ö–∏—è —Å–ª–æ–µ–≤ –∫–∞—Ä—Ç—ã

–ò–≥—Ä–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ OpenStreetMap –≤ –∏–≥—Ä–æ–≤–æ–π –º–∏—Ä —á–µ—Ä–µ–∑ 5 —ç—Ç–∞–ø–æ–≤:

1.  **–ö—Ä–∞—Å–Ω—ã–µ –ª–∏–Ω–∏–∏ (Red Lines - –î–æ—Ä–æ–≥–∏)**: 
    *   ¬´–°–∫–µ–ª–µ—Ç¬ª, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —á–µ—Ä–µ–∑ Overpass API.
    *   –•—Ä–∞–Ω–∏—Ç—Å—è –≤ `game:red_lines`.
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤; –æ–±—ã—á–Ω–æ —Å–∫—Ä—ã—Ç –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.

2.  **–°–∏–Ω–∏–µ –∫—Ä—É–≥–∏ (Blue Circles - –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∏)**:
    *   –°–æ–∑–¥–∞—é—Ç—Å—è –≤ —Ç–æ—á–∫–∞—Ö, –≥–¥–µ –∫—Ä–∞—Å–Ω—ã–µ –ª–∏–Ω–∏–∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è, —Ä–∞–∑–≤–µ—Ç–≤–ª—è—é—Ç—Å—è –∏–ª–∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è.
    *   –°–≤–æ–π—Å—Ç–≤–æ `connections` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª-–≤–æ –¥–æ—Ä–æ–≥, —Å—Ö–æ–¥—è—â–∏—Ö—Å—è –∑–¥–µ—Å—å.
    *   `active_connections` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ ¬´–∏–≥—Ä–æ–≤—ã—Ö¬ª –±–µ–ª—ã—Ö –ª–∏–Ω–∏–π –ø–æ–¥–∫–ª—é—á–µ–Ω–æ.

3.  **–ë–µ–ª—ã–µ –ª–∏–Ω–∏–∏ (White Lines - –ü—É—Ç–∏)**:
    *   –ü—Ä–æ—Ö–æ–¥–∏–º—ã–µ –ø—É—Ç–∏ –º–µ–∂–¥—É —Å–∏–Ω–∏–º–∏ –∫—Ä—É–≥–∞–º–∏.
    *   –ö–∞–∂–¥–∞—è –ª–∏–Ω–∏—è –∏–º–µ–µ—Ç —Å–≤–æ–π `id` –∏ –¥–ª–∏–Ω—É (`length`).

4.  **–ó–µ–ª–µ–Ω—ã–µ –∫—Ä—É–≥–∏ (Green Circles - –¢–æ—á–∫–∏ –∑–∞—Ö–≤–∞—Ç–∞)**:
    *   –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤–¥–æ–ª—å –±–µ–ª—ã—Ö –ª–∏–Ω–∏–π –∫–∞–∂–¥—ã–µ ~15 –º–µ—Ç—Ä–æ–≤ (`target_spacing`).
    *   –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø–æ—Å–µ—Ç–∏—Ç—å –∏—Ö –≤—Å–µ, —á—Ç–æ–±—ã ¬´–∑–∞—Ö–≤–∞—Ç–∏—Ç—å¬ª –ª–∏–Ω–∏—é.
    *   –°–≤—è–∑–∞–Ω—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º `line_id`.

5.  **–ü–æ–ª–∏–≥–æ–Ω—ã –∏ –≥—Ä—É–ø–ø—ã (Polygons & Groups - –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏)**:
    *   –û–±—Ä–∞–∑—É—é—Ç—Å—è –∑–∞–º–∫–Ω—É—Ç—ã–º–∏ —Ü–∏–∫–ª–∞–º–∏ –±–µ–ª—ã—Ö –ª–∏–Ω–∏–π.
    *   –£—Å–ø–µ—à–Ω—ã–π –∑–∞—Ö–≤–∞—Ç –≤—Å–µ—Ö –æ–∫—Ä—É–∂–∞—é—â–∏—Ö –±–µ–ª—ã—Ö –ª–∏–Ω–∏–π ¬´–∑–∞–≤–µ—Ä—à–∞–µ—Ç¬ª –ø–æ–ª–∏–≥–æ–Ω.
    *   ¬´–ì—Ä—É–ø–ø—ã¬ª –æ–±—ä–µ–¥–∏–Ω—è—é—Ç —Å–æ—Å–µ–¥–Ω–∏–µ –ø–æ–ª–∏–≥–æ–Ω—ã –≤ –µ–¥–∏–Ω—É—é –≤–∏–∑—É–∞–ª—å–Ω—É—é —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—é.

---

## üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (Redis)

| –ö–ª—é—á | –§–æ—Ä–º–∞—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `game:meta` | JSON | –¶–µ–Ω—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (lat/lon). |
| `game:red_lines` | List | –ì–µ–æ-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ—Ä–æ–≥ OSM. |
| `game:blue_circles`| List | –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∏ –∏ –∏—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ. |
| `game:white_lines` | List | –ü—É—Ç–∏ –º–µ–∂–¥—É –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–∫–∞–º–∏. |
| `game:polygons` | List | –ó–∞–º–∫–Ω—É—Ç—ã–µ –∫–æ–Ω—Ç—É—Ä—ã –∑–æ–Ω –∑–∞—Ö–≤–∞—Ç–∞. |
| `game:groups` | List | –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã –ø–æ–ª–∏–≥–æ–Ω–æ–≤. |

---

## üõ†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

*   **Region Size**: ~0.0015 –≥—Ä–∞–¥—É—Å–∞ (—Ä–∞–¥–∏—É—Å ~150–º) –≤–æ–∫—Ä—É–≥ –∏–≥—Ä–æ–∫–∞.
*   **Target Spacing**: 15.0 –º–µ—Ç—Ä–æ–≤ (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∑–µ–ª–µ–Ω—ã–º–∏ –∫—Ä—É–≥–∞–º–∏).
*   **Snap Distance**: ~5-10 –º–µ—Ç—Ä–æ–≤ (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è "–ø—Ä–∏–ª–∏–ø–∞–Ω–∏—è" –∏–≥—Ä–æ–∫–∞ –∫ –ª–∏–Ω–∏–∏).

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

*   **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å Overpass**: API –º–æ–∂–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–µ—Ä–∫–∞–ª–∞ (mirrors).
*   **–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å**: –î–ª—è Shapely –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.buffer(0)`, —á—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∞–º–æ–ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è —Ü–∏–∫–ª—ã –∏–∑ –¥–∞–Ω–Ω—ã—Ö OSM.
