<style>
    /* Top Bar Container */
    .top-controls {
        position: absolute;
        top: 4vh;
        right: 6vh;
        display: flex;
        gap: 8vh;
        z-index: 50;
        /* Removed transition for instant effect as requested */
        align-items: center;
        justify-content: flex-end;
        /* Default: shrink to fit content on right */
        width: auto;
        padding: 0;
        border-radius: 0;
    }

    /* Expanded State */
    .top-controls.expanded {
        top: 0;
        right: 0;
        width: 100%;
        /* Adjusted height to include padding + button height + bottom spacing */
        height: 14vh;
        background-color: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);

        /* Essential for keeping buttons in place: */
        padding-top: 4vh;
        /* Matches original top: 4vh */
        padding-right: 6vh;
        /* Matches original right: 4vh */
        padding-left: 2vh;

        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        align-items: flex-start;
        /* Ensures buttons stick to the top padding line */
    }

    .control-btn {
        width: 6vh;
        height: 6vh;
        background-color: rgba(30, 30, 30, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(5px);
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 1vh;
        cursor: pointer;
        transition: all 0.3s ease;
        flex-shrink: 0;
        /* Prevent squishing */
    }

    /* Active State (Red Border) */
    .control-btn.active {
        border: 2px solid red;
        background-color: rgba(60, 60, 60, 0.9);
    }

    .control-btn:active {
        background-color: rgba(60, 60, 60, 0.9);
    }

    .control-btn svg {
        width: 60%;
        height: 60%;
        fill: white;
        transition: fill 0.3s;
    }

    /* Expanded Menu Button Style: Red Border */
    .top-controls.expanded #menu-btn {
        border: 2px solid red;
        background-color: rgba(60, 60, 60, 0.9);
    }

    .top-controls.expanded #menu-btn svg {
        fill: white;
        /* Revert fill to white as per new style */
    }

    /* New Menu Items Container */
    .menu-items {
        display: flex;
        gap: 4vh;
        display: none;
        /* Hidden by default */
        /* margin-right removed to prevent double gap */
    }

    .top-controls.expanded .menu-items {
        display: flex;
        /* Show instantly */
    }

    /* Hide GPS when expanded */
    .top-controls.expanded #gps-btn {
        display: none;
        /* Instant hide */
    }

    /* Mobile Responsive */
    @media (max-width: 1024px) {
        .top-controls {
            top: 2vh;
            right: 2vh;
        }

        .top-controls.expanded {
            top: 0;
            padding-top: 2vh;
            /* Adjust for mobile top: 2vh */
            padding-right: 2vh;
            /* Adjust for mobile right: 2vh */
        }

        .control-btn {
            width: 8vh;
            height: 8vh;
        }
    }
</style>

<div class="top-controls" id="top-bar">

    <!-- Expanded Menu Items (Hidden by default) -->
    <div class="menu-items">
        <!-- Logout (Far Left) -->
        <div class="control-btn" id="logout-btn" title="Logout">
            <svg viewBox="0 0 24 24">
                <path
                    d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5a2 2 0 0 0-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" />
            </svg>
        </div>

        <!-- Leaderboard (Middle) -->
        <div class="control-btn" id="leaderboard-btn" title="Leaderboard">
            <svg viewBox="0 0 24 24">
                <path d="M16 11V3H8v6H2v12h20V11h-6zm-6-6h4v14h-4V5zm-6 6h4v8H4v-8zm16 8h-4v-6h4v6z" />
            </svg>
        </div>

        <!-- Settings (Right, next to Menu) -->
        <div class="control-btn" id="settings-btn" title="Settings">
            <svg viewBox="0 0 24 24">
                <path
                    d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
            </svg>
        </div>
    </div>

    <!-- GPS Button (Visible by default) -->
    <div class="control-btn" id="gps-btn">
        <svg viewBox="0 0 24 24">
            <path
                d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z" />
        </svg>
    </div>

    <!-- Sandwich/Menu Button -->
    <div class="control-btn" id="menu-btn">
        <svg viewBox="0 0 24 24">
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
        </svg>
    </div>
</div>